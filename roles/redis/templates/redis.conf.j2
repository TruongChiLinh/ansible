bind {{ redis_bind }}
protected-mode no
port {{ redis_port }}
requirepass {{ redis_password }}
masterauth {{ redis_password }}

daemonize yes
pidfile /run/redis/redis-server.pid

maxmemory {{ redis_maxmemory }}
maxmemory-policy {{ redis_maxmemory_policy }}

appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec

save 900 1
save 300 10
save 60 10000

dir /var/lib/redis
logfile /var/log/redis/redis-server.log

{% if redis_role == "slave" %}
replica-read-only yes
{% endif %}
